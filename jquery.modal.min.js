!function(o){"object"==typeof module&&"object"==typeof module.exports?o(require("jquery"),window,document):o(jQuery,window,document)}(function(s,o,t,i){var l=[],n=function(){return l.length?l[l.length-1]:null},e=function(){var o,t=!1;for(o=l.length-1;0<=o;o--)l[o].$blocker&&(l[o].$blocker.toggleClass("current",!t).toggleClass("behind",t),t=!0)};s.modal=function(i,o){var e,t;if(this.$body=s("body"),this.options=s.extend({},s.modal.defaults,o),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),this.$blocker=null,this.options.closeExisting)for(;s.modal.isActive();)s.modal.close();if(l.push(this),i.is("a"))if(t=i.attr("href"),this.anchor=i,/^#/.test(t)){if(this.$elm=s(t),1!==this.$elm.length)return null;this.$body.append(this.$elm),this.open()}else this.$elm=s("<div>"),this.$body.append(this.$elm),e=function(o,t){t.elm.remove()},this.showSpinner(),i.trigger(s.modal.AJAX_SEND),s.get(t).done(function(o){if(s.modal.isActive()){i.trigger(s.modal.AJAX_SUCCESS);var t=n();t.$elm.empty().append(o).on(s.modal.CLOSE,e),t.hideSpinner(),t.open(),i.trigger(s.modal.AJAX_COMPLETE)}}).fail(function(){i.trigger(s.modal.AJAX_FAIL),n().hideSpinner(),l.pop(),i.trigger(s.modal.AJAX_COMPLETE)});else this.$elm=i,this.anchor=i,this.$body.append(this.$elm),this.open()},s.modal.prototype={constructor:s.modal,open:function(){var o=this;this.block(),this.anchor.blur(),this.options.doFade?setTimeout(function(){o.show()},this.options.fadeDuration*this.options.fadeDelay):this.show(),s(t).off("keydown.jmodal").on("keydown.jmodal",function(o){var t=n();27===o.which&&t.options.escapeClose&&t.close()}),this.options.clickClose&&this.$blocker.click(function(o){o.target===this&&s.modal.close()})},close:function(){l.pop(),this.unblock(),this.hide(),s.modal.isActive()||s(t).off("keydown.jmodal")},block:function(){this.$elm.trigger(s.modal.BEFORE_BLOCK,[this._ctx()]),this.$body.css("overflow","hidden"),this.$blocker=s('<div class="'+this.options.blockerClass+' blocker current"></div>').appendTo(this.$body),e(),this.options.doFade&&this.$blocker.css("opacity",0).animate({opacity:1},this.options.fadeDuration),this.$elm.trigger(s.modal.BLOCK,[this._ctx()])},unblock:function(o){!o&&this.options.doFade?this.$blocker.fadeOut(this.options.fadeDuration,this.unblock.bind(this,!0)):(this.$blocker.children().appendTo(this.$body),this.$blocker.remove(),this.$blocker=null,e(),s.modal.isActive()||this.$body.css("overflow",""))},show:function(){this.$elm.trigger(s.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=s('<a href="#close-jmodal" rel="jmodal:close" class="close-jmodal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass).appendTo(this.$blocker),this.options.doFade?this.$elm.css({opacity:0,display:"inline-block"}).animate({opacity:1},this.options.fadeDuration):this.$elm.css("display","inline-block"),this.$elm.trigger(s.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(s.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove();var o=this;this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration,function(){o.$elm.trigger(s.modal.AFTER_CLOSE,[o._ctx()])}):this.$elm.hide(0,function(){o.$elm.trigger(s.modal.AFTER_CLOSE,[o._ctx()])}),this.$elm.trigger(s.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||s('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},_ctx:function(){return{elm:this.$elm,$elm:this.$elm,$blocker:this.$blocker,options:this.options}}},s.modal.close=function(o){if(s.modal.isActive()){o&&o.preventDefault();var t=n();return t.close(),t.$elm}},s.modal.isActive=function(){return 0<l.length},s.modal.getCurrent=n,s.modal.defaults={closeExisting:!0,escapeClose:!0,clickClose:!0,closeText:"Fechar",closeClass:"",modalClass:"jmodal",blockerClass:"jquery-jmodal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,showClose:!0,fadeDuration:250,fadeDelay:1},s.modal.BEFORE_BLOCK="jmodal:before-block",s.modal.BLOCK="jmodal:block",s.modal.BEFORE_OPEN="jmodal:before-open",s.modal.OPEN="jmodal:open",s.modal.BEFORE_CLOSE="jmodal:before-close",s.modal.CLOSE="jmodal:close",s.modal.AFTER_CLOSE="jmodal:after-close",s.modal.AJAX_SEND="jmodal:ajax:send",s.modal.AJAX_SUCCESS="jmodal:ajax:success",s.modal.AJAX_FAIL="jmodal:ajax:fail",s.modal.AJAX_COMPLETE="jmodal:ajax:complete",s.fn.modal=function(o){return 1===this.length&&new s.modal(this,o),this},s(t).on("click.jmodal",'a[rel~="jmodal:close"]',s.modal.close),s(t).on("click.jmodal",'a[rel~="jmodal:open"]',function(o){o.preventDefault(),s(this).modal()})});